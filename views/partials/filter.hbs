{{!-- recipes/ filter - query params --}}
<form class="filter-form" action="/" method="get" name="filter">
    <div>
        <h2>Filter</h2>
        <h3>Categories</h3>
        <fieldset class="filter-fieldset">
            {{#each categories}}
                <div class="rounded-sign" style="background-color: #e0f5c8;">
                    <input type="checkbox" name="category" value="{{category}}"><span>{{category}}</span>
                </div>
            {{/each}}
        </fieldset>
        <h3>Meals</h3>
        <fieldset class="filter-fieldset">
            {{#each meals}}
                <div class="rounded-sign" style="background-color: #fee4cb;">
                    <input type="checkbox" name="meal" value="{{meal}}"><span>{{meal}}</span>
                </div>
            {{/each}}
            </fieldset>
        <h3>Include ingredients</h3>
        <fieldset class="filter-fieldset">
            {{#each ingredients}}
                <div class="rounded-sign" style="background-color: #ffd3e2;">
                    <input type="checkbox" name="include" value="{{name}}"><span>{{name}}</span>
                </div>
            {{/each}}
        </fieldset>
        <h3>Exclude ingredients</h3>
        <fieldset class="filter-fieldset" >
            {{#each ingredients}}
                <div class="rounded-sign" style="background-color: #e9e7fd;">
                    <input type="checkbox" name="exclude" value="{{name}}"><span>{{name}}</span>
                </div>
            {{/each}}
        </fieldset>
    </div>
    <div>
        <div>
            <button onclick="filter(event)" class="big-green-button" style="width: 70px;">Apply</button>
        </div>
    </div>
</form>

<script>
    async function filter(event) {
        event.preventDefault();
        let form = document.forms.filter;
        let formData = new FormData(form);
        let mySearchParams = new URLSearchParams(formData);
        let qs = new URLSearchParams(formData).toString();
       await getRecipes(qs);
    }
</script>